(()=>{"use strict";var e={};function t(e,t){const s=document.createElement("div");return s.classList.add("tips"),s.classList.add(`tips-${t}`),document.createElement("div").classList.add("left-tips"),e.forEach(((n,a)=>{const o=[];let c=0;const r=n.length;n.forEach(((s,n)=>{const i="top"===t?e[n][a]:s;1===i&&(c+=1),(0!==c&&0===i||r-1===n&&0!==c)&&(o.push(c),c=0)}));const i=document.createElement("ul");i.classList.add("tips-line"),i.classList.add(`tips-line-${t}`);for(let e=0;e<=Math.ceil(n.length/2)-1;e+=1){const s=document.createElement("li");s.classList.add("tips-number"),s.classList.add(`tips-number-${t}`),s.innerText=o[e]||"",o[e]?i.append(s):i.prepend(s)}s.append(i)})),s}let s;function n(e,t,s){const n=document.createElement("section");n.classList.add("settings"),n.append(function(e,t){const s=["","game--medium","game--hard"],n=document.createElement("div");n.classList.add("settings__complexity-wrapper");const a=document.createElement("h2");a.classList.add("settings__complexity-title"),a.textContent="Выберите сложность:";const o=document.createElement("ul");function c(n){let a;"Легко"===n.currentTarget.textContent?a=0:"Средне"===n.currentTarget.textContent?a=1:"Сложно"===n.currentTarget.textContent&&(a=2),e(t,0,"00:00",a),a&&document.querySelector(".game").classList.add(s[a])}return o.classList.add("settings__complexity-list"),["Легко","Средне","Сложно"].forEach((e=>{const t=document.createElement("li");t.classList.add("settings__complexity-item");const s=document.createElement("button");s.classList.add("settings__complexity-button"),s.textContent=e,s.addEventListener("click",c),t.append(s),o.append(t),n.append(a),n.append(o)})),n}(e,t)),n.append(function(e){const t=document.createElement("div");t.classList.add("settings__sound-wrapper");const s=document.createElement("p");s.classList.add("settings__sound-text"),s.textContent="Звук:";const n=document.createElement("div");return n.classList.add("settings__toggle"),n.classList.add("settings__toggle--active"),t.append(s),t.append(n),n.addEventListener("click",(function(){e(n.className.includes("settings__toggle--active")),n.classList.toggle("settings__toggle--active")})),t}(s.mute)),n.append(function(){const e=document.createElement("div");e.classList.add("settings__theme-wrapper");const t=document.createElement("p");t.classList.add("settings__theme-text"),t.textContent="Тема:";const s=document.createElement("div");return s.classList.add("settings__toggle"),e.append(t),e.append(s),"dark"===localStorage.getItem("theme")&&(document.body.classList.add("dark"),s.classList.add("settings__toggle--active")),s.addEventListener("click",(function(e){e.currentTarget.classList.toggle("settings__toggle--active"),document.body.classList.toggle("dark"),"dark"===localStorage.getItem("theme")?localStorage.setItem("theme","light"):localStorage.setItem("theme","dark")})),e}()),function(e,t,s,n){const a=document.createElement("button");if(a.classList.add("board-result__save-game"),a.textContent="Сохранить игру",a.addEventListener("click",(function(){const t=function(){let t=0,a=e[n][s][1].length;const o=document.querySelectorAll(".board-game .square");return e[n][s][1].map((()=>{const c=[];for(;t<a;t+=1)o[t].className.includes("active")?c.push(1):o[t].className.includes("cross")?c.push(2):c.push(0);return a+=e[n][s][1].length,c}))}(),a=document.querySelector(".board__time").textContent;localStorage.setItem("gameState",JSON.stringify(t)),localStorage.setItem("gameNum",JSON.stringify(s)),localStorage.setItem("gameTimer",a),localStorage.setItem("mode",n)})),localStorage.getItem("gameState")){const s=document.createElement("button");return s.classList.add("board-result__load-game"),s.textContent="Загрузить игру",s.addEventListener("click",(function(){const s=+localStorage.getItem("gameNum"),n=localStorage.getItem("gameTimer"),a=+localStorage.getItem("mode");t(e,s,n,a);const o=document.querySelectorAll(".board-game .square"),c=JSON.parse(localStorage.getItem("gameState"));let r=0;c.forEach((e=>{e.forEach((e=>{1===e?o[r].classList.add("square--active"):2===e&&o[r].classList.add("square--cross"),r+=1}))}))})),[a,s]}return[a]}(t,e,s.num,s.modeData).forEach((e=>{n.append(e)})),n.append(function(e,t,s,n,a){const o=document.createElement("button");return o.classList.add("board__reset-button"),o.textContent="Сбросить игру",o.addEventListener("click",(function(){e(t,s,"00:00",a)})),o}(e,t,s.num,0,s.modeData));const{button:a,popup:o}=function(){const e=document.createElement("button");e.classList.add("settings__result-button"),e.textContent="Показать результаты";const t=document.createElement("div");t.classList.add("settings__result-popup");const s=document.createElement("div");s.classList.add("settings__result-popup-content"),t.append(s);const n=document.createElement("button");n.classList.add("settings__result-popup-button"),s.append(n);const a=document.createElement("ul");if(a.classList.add("settings__result-popup-list"),localStorage.getItem("winGames")){const e=JSON.parse(localStorage.getItem("winGames")).slice(-5);e.sort(((e,t)=>+e.time.split(":")[0]<+t.time.split(":")[0]||+e.time.split(":")[0]==+t.time.split(":")[0]&&+e.time.split(":")[1]<+t.time.split(":")[1]?-1:0));let t="";e.forEach((e=>{t+=`\n        <li class="settings__result-popup-item">\n          <p class="settings__result-name">\n            ${e.name}\n          </p>\n          <p class="settings__result-complexity">\n            ${e.complexity}\n          </p>\n          <p class="settings__result-time">\n            ${e.time}\n          </p>\n        </li>\n      `})),a.innerHTML=t,s.append(a)}else e.setAttribute("disabled","disabled"),s.append(a);return e.addEventListener("click",(function(){document.querySelector(".settings__result-popup").classList.add("settings__result-popup--active"),document.body.classList.add("off-scroll"),window.scrollTo(0,0)})),n.addEventListener("click",(function(){document.querySelector(".settings__result-popup").classList.remove("settings__result-popup--active"),document.body.classList.remove("off-scroll")})),{button:e,popup:t}}();return n.append(a),n.append(o),n.append(function(e){const t=document.createElement("button");return t.classList.add("settings__show-result"),t.textContent="Показать ответ",t.addEventListener("click",(function(){const t=e.allMatricesData[e.modeData][e.num][1],s=document.querySelectorAll(".square");let n=0;t.forEach((e=>{e.forEach((e=>{s[n].classList.remove("square--active"),s[n].classList.remove("square--cross"),e&&s[n].classList.add("square--fill"),n+=1}))})),e.stopTimer(),e.removeEvents(),e.removeListener(),document.querySelector(".board-result__save-game").setAttribute("disabled","disabled")})),t}(s)),n.append(function(e,t){const s=document.createElement("button");function n(e,t){const s=e-.5,n=t+.5,a=s+Math.random()*(n-s);return Math.round(a)}return s.classList.add("settings__random-button"),s.textContent="Случайная игра",s.addEventListener("click",(function(){e(t,n(0,4),"00:00",n(0,2))})),s}(e,t)),n}function a(e,t,s){return!!t&&function(e,t){for(let s=0;s<t.length;s+=1)for(let n=0;n<t.length;n+=1)if(t[s][n]!==e[s][n])return!1;let n;switch(document.querySelector(".board-result__save-game").setAttribute("disabled","disabled"),s.stopTimer(),s.modeData){case 0:n="Легко";break;case 1:n="Средне";break;default:n="Сложно"}const a={name:s.allMatricesData[s.modeData][s.num][0],time:document.querySelector(".board__time").textContent,complexity:n};let o=[];localStorage.getItem("winGames")&&(o=JSON.parse(localStorage.getItem("winGames"))),o.push(a),localStorage.setItem("winGames",JSON.stringify(o)),o=o.slice(-5),o.sort(((e,t)=>+e.time.split(":")[0]<+t.time.split(":")[0]||+e.time.split(":")[0]==+t.time.split(":")[0]&&+e.time.split(":")[1]<+t.time.split(":")[1]?-1:0));const c=document.querySelector(".settings__result-popup-list");let r="";return o.forEach((e=>{r+=`\n        <li class="settings__result-popup-item">\n          <p class="settings__result-name">\n            ${e.name}\n          </p>\n          <p class="settings__result-complexity">\n            ${e.complexity}\n          </p>\n          <p class="settings__result-time">\n            ${e.time}\n          </p>\n        </li>\n      `})),c.innerHTML=r,document.querySelector(".settings__result-button").removeAttribute("disabled"),!0}(function(){let s=0,n=e.length;return e.map((()=>{const a=[];for(;s<n;s+=1)t[s].className.includes("active")?a.push(1):a.push(0);return n+=e.length,a}))}(),e)}function o(){document.querySelector(".result-text")&&document.querySelector(".result-text").remove();const e=document.querySelector(".game");document.querySelector(".board").classList.add("board--inactive");const t=document.createElement("p"),s=document.querySelector(".board__time").textContent;t.innerText=`Отлично! Вы разгадали нонограмму за ${s.split(":")[0]} минут, ${s.split(":")[1]} секунд!`,t.classList.add("result-text"),e.prepend(t)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var n=s.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&!t;)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const c=e.p+"src/components/board/audio/knopka-jeskaya-korotkii-dalekii.mp3",r=e.p+"src/components/board/audio/yes-yes-yes-yes-yes.mp3",i=e.p+"src/components/board/audio/knopka-jeskaya-korotkii-suhoi.mp3",l=e.p+"src/components/board/audio/lovushka-iz-raspyilitelya.mp3";let d,u,m;function p(){document.removeEventListener("mouseover",d),document.removeEventListener("mousedown",u)}function g(e,t){document.removeEventListener("mouseover",d),document.removeEventListener("mousedown",u),document.removeEventListener("contextmenu",m);let s,n,g=!1,v=!0;const L=new Audio;L.src=c;const _=new Audio;_.src=r;const f=new Audio;f.src=i;const E=new Audio;E.src=l,document.addEventListener("mousedown",(e=>{g=!0,s=e.button,v=!e.target.className.includes("active")&&!e.target.className.includes("cross"),e.target.className.includes("active")?n="active":e.target.className.includes("cross")&&(n="cross")})),document.addEventListener("mouseup",(e=>{g=!1,e.preventDefault()})),d=function(c){if(!g)return;const r=c.target;if(2===s)return r.className.includes("square")&&(v||"active"===n?(r.className.includes("square--cross")||f.play(),r.classList.add("square--cross"),r.classList.remove("square--active")):(r.className.includes("square--cross")&&E.play(),r.classList.remove("square--cross"))),void(a(e,document.querySelectorAll(".board-game .square"),t)&&(document.removeEventListener("mouseover",d),document.removeEventListener("mousedown",u),o(),_.play()));r.className.includes("square")&&(v||"cross"===n?(r.className.includes("square--active")||L.play(),r.classList.add("square--active"),c.target.classList.remove("square--cross")):(r.className.includes("square--active")&&E.play(),r.classList.remove("square--active"))),a(e,document.querySelectorAll(".board-game .square"),t)&&(document.removeEventListener("mouseover",d),document.removeEventListener("mousedown",u),o(),_.play())},u=function(s){const n=s.target;if(n.className.includes("square")){if(2===s.button)return n.className.includes("square--cross")?E.play():f.play(),s.target.classList.remove("square--active"),s.target.classList.toggle("square--cross"),void(a(e,document.querySelectorAll(".board-game .square"),t)&&(document.removeEventListener("mouseover",d),document.removeEventListener("mousedown",u),o(),_.play()));n.className.includes("square")&&(n.className.includes("square--active")?E.play():L.play(),n.classList.toggle("square--active"),n.classList.remove("square--cross")),a(e,document.querySelectorAll(".board-game .square"),t)&&(_.play(),document.removeEventListener("mouseover",d),document.removeEventListener("mousedown",u),o())}},document.addEventListener("mouseover",d),document.addEventListener("mousedown",u),m=function(e){e.preventDefault()};const b=document.querySelectorAll(".square");return console.log(b),b.forEach((e=>{e.addEventListener("contextmenu",m)})),{removeEvents:p,mute:function(e){e?(L.muted=!0,_.muted=!0,f.muted=!0,E.muted=!0):(L.muted=!1,_.muted=!1,f.muted=!1,E.muted=!1)}}}const v=["","game--medium","game--hard"];!function e(a,o,c,r){document.body.innerText&&(document.body.innerText="");const i=document.createElement("main");i.classList.add("main");const l=document.createElement("container");l.classList.add("container"),i.append(l),l.append(function(e){const t=document.createElement("section");t.classList.add("puzzles");const s=document.createElement("ul");return s.classList.add("puzzles__list"),e.forEach((e=>{const t=document.createElement("li");t.classList.add("puzzles__item");const n=e[0];t.textContent=n,s.append(t)})),t.append(s),t}(a[r]));const d=function(e){const s=document.createElement("section");s.classList.add("game");const n=function(e){const t=document.createElement("div");t.classList.add("board"),t.classList.add("board-game");const s=document.createElement("div");s.classList.add("game-field"),t.append(s);let n=0;return e.forEach((e=>{e.forEach((()=>{const e=document.createElement("div");e.classList.add("square"),e.setAttribute("id",n),s.append(e),n+=1}))})),t}(e);return n.prepend(t(e,"top")),n.prepend(t(e,"left")),s.append(n),s}(a[r][o][1]);l.append(d),document.body.append(i);const{watchTimer:u,stopTimer:m,removeListener:p}=function(e,t){let n=+t.split(":")[0],a=+t.split(":")[1];const o=document.createElement("p");o.classList.add("board__time"),o.textContent=t,s&&clearInterval(s);const c=document.querySelector(".game-field");function r(){s=setInterval((()=>{a+=1,60===a&&(n+=1,a=0),o.textContent=`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}),1e3)}return c.addEventListener("mousedown",r,{once:!0}),{watchTimer:o,stopTimer:function(){clearInterval(s)},removeListener:function(){c.removeEventListener("mousedown",r)}}}(a[r][o][1],c),{removeEvents:L,mute:_}=g(a[r][o][1],{allMatricesData:a,num:o,modeData:r,stopTimer:m}),f=n(e,a,{allMatricesData:a,num:o,modeData:r,stopTimer:m,removeEvents:L,removeListener:p,mute:_});l.append(f),document.querySelectorAll(".puzzles__item").forEach(((t,s)=>{var n,o;t.addEventListener("click",(n=s,o=e,function(){o(a,n,"00:00",r)}))})),document.querySelector(".board").append(u),r&&document.querySelector(".game").classList.add(v[r])}([[["Крест",[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]]],["Цветок",[[0,0,1,0,0],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]]],["Сердце",[[0,1,0,1,0],[1,0,1,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0]]],["Солнце",[[0,0,1,0,0],[0,1,1,1,0],[1,1,0,1,1],[0,1,1,1,0],[0,0,1,0,0]]],["Лестница",[[1,0,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0],[1,1,1,1,1]]]],[["Пальма",[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,0],[0,0,0,1,0,1,0,1,0,1],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,1,0,1,0],[0,0,0,1,0,1,1,1,0,1],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,1]]],["Лодка",[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,1,1,1,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,0,0]]],["Red John",[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,1,1,0,0],[0,1,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,1,0],[0,0,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0]]],["Курица",[[0,0,1,0,0,0,1,1,0,0],[0,1,1,1,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0]]],["RS",[[1,1,1,1,0,0,0,1,1,1],[1,0,0,1,1,0,1,1,0,0],[1,0,0,1,1,0,1,0,0,0],[1,0,0,1,1,0,1,1,0,0],[1,0,0,1,0,0,0,1,1,1],[1,1,1,1,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,1],[1,0,1,1,0,0,0,0,0,1],[1,0,0,1,1,0,0,0,1,1],[1,0,0,0,1,0,1,1,1,0]]]],[["Город",[[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0,0,0,0],[1,1,0,1,1,1,0,1,1,1,1,0,0,0,0],[1,1,0,1,1,1,0,1,1,1,1,0,0,0,0],[1,1,1,1,1,1,0,1,1,1,1,0,1,1,0],[1,1,1,1,1,1,0,1,1,1,1,0,1,1,1],[1,1,1,1,1,1,0,1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]],["Вишня",[[0,0,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,1,1,0],[0,0,0,0,0,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,1,1,0,0,0,1,1,1,1,1,1],[0,0,0,0,1,0,0,0,0,0,1,1,1,1,1],[0,0,0,1,1,0,0,0,0,0,1,0,1,1,1],[0,0,0,1,0,0,0,0,0,0,1,0,0,0,0],[0,0,1,1,0,0,0,0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],[1,1,1,1,1,1,0,0,1,1,1,1,1,1,0],[1,1,1,1,1,1,0,0,1,1,1,1,1,1,0],[1,1,1,1,1,1,0,0,1,1,1,1,1,1,0],[0,1,1,1,1,0,0,0,0,1,1,1,1,0,0]]],["Страус",[[0,0,0,0,0,0,0,0,0,0,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,1,1,1,1,0,0,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,1,1,1,0,0,0],[0,0,1,1,1,0,0,0,0,0,0,1,1,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,1,1,0],[0,1,1,0,0,0,0,0,0,0,0,0,0,1,0]]],["Лошадь",[[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,1,1],[1,1,0,0,1,1,1,0,0,0,0,0,0,1,0],[0,0,0,0,1,1,1,0,0,0,0,0,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,0,0,0,1,1,0,0,0,0,0,1,1,1,0],[0,1,0,0,1,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,1,1,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0]]],["Корона",[[1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,0,0,0,0,0,1,1,1,1,1],[1,1,1,0,0,0,0,1,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,1,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],[0,1,1,0,1,0,0,1,0,0,1,0,1,1,0],[1,0,0,1,0,0,0,1,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,1,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,1,0,0,0,1,0,0,1],[0,1,0,1,0,0,0,1,0,0,0,1,0,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],[1,0,1,1,1,1,1,1,1,1,1,1,1,0,1]]]]],0,"00:00",0)})();